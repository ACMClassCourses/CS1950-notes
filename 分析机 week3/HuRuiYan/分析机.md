### 第二讲 分析机

#### 1.概念

​	1837年巴贝奇提出的**可编程机械**计算机，利用打孔卡进行操作，用机械装置实现运算。分析机未被完整构建出来，但本身的**设计逻辑**具有跨时代意义。



#### 2.架构

​	分析机包含了许多现代计算机的要素，例如：储存器，控制系统，运算器、输入输出。其整体架构几乎对应当下的**Havard 结构**。

​	（1）Von Neumann 结构：

![](pic\Von_Neumann_Architecture.png)

​	（2）Harvard 结构：

![](pic\Harvard_Architecture.png)

​	（3）本质区别

​		Harvard Architecture将指令内存和数据内存完全分离，由两条独立总线分别控制；

​		Von Neumann Architecture不区分指令内存和数据内存，二者共用一条总线。

​	（4）优劣

​		Von Neumann Architecture ：成本低。但指令与数据可能冲突，稳定性略差（但可通过OS弥补），且	同时只能访问一个指令/数据中的一者，速度较慢；

​		Harvard Architecture：指令与数据分离，稳定性强，且可以通过两条总线分别访问指令与数据。但成本	较高。

​	（5）实际应用

​		实际使用中，采用二者混合的架构。CPU对内存采用Von Neumann架构，CPU内部（cache）采用	 	Harvard Architecture。



#### 3.分析机的可编程性

​	分析机的语言与汇编语言类似，是**图灵完备的**。

​	图灵完备性：若一系列操作数据的规则（e.g. 指令集，编程语言）**可以模拟任意图灵机**，则称其为**图灵完备的**。当下几乎所有编程语言都是图灵完备的。



#### 4.分析机与差分机的比较

（1）差异

​	分析机是通用计算机，有完整的计算机架构，和加减乘除等完整的四则运算，未被搭建出来。

​	差分机是为计算多项式的特定功能的计算机，仅能实现特定用途，且仅能实现加法。第一代分析机成功被搭建。

（2）优劣势

​	分析机：

​		优点：具有可编程性，可以完成不同的任务。 

​		缺点：结构过于复杂无法搭建，且效率低、故障率高（构件多），操作复杂。

​	差分机：

​		优点：效率高，操作简便，且可实现。

​		缺点：功能单一。



#### 5.分析机的编程语言

（1）运算

| 操作 | 命令 | 注释                                                         |
| ---- | ---- | ------------------------------------------------------------ |
| 加法 | +    | 切换入加法模式，载入两个数后自动运算，下同                   |
| 减法 | -    | 切换入减法模式。如果结果为负数会使操作杆抬起                 |
| 乘法 | *    | 切换入乘法模式，结果会存入两个内存空间                       |
| 除法 | /    | 切换入除法模式，被除数可以存入两个内存空间，若除数为0操作杆抬起 |

（2）内存操作

| 操作 | 命令   | 注释                                                     |
| ---- | ------ | -------------------------------------------------------- |
| 赋值 | N k x  | 将内存k位置赋值为x                                       |
| 载入 | L k    | 将内存k位置载入输入，先载入的在Ingress 1,后者在Ingress 2 |
| 存储 | S(') k | 将输出Egress(')存入内存k                                 |

（3）输出

| 操作 | 命令 | 注释        |
| ---- | ---- | ----------- |
| 输出 | P k  | 将内存k输出 |

（4）跳转

| 操作     | 命令       | 注释                                            |
| -------- | ---------- | ----------------------------------------------- |
| 向前跳转 | F n        | 向前跳转n个命令，**跳转在执行本条命令后再执行** |
| 向后跳转 | B n        | 向后跳转n个命令                                 |
| 条件跳转 | ?F n/? B n | 若操作杆抬起，则向前/后跳转n个命令              |

